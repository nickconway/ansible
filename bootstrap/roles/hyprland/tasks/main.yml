---
- name: Check for Hyprland File
  stat:
    path: ~/.hyprland
  register: hyprland

- block:
    - name: Install Hyprland Packages
      command: >
        yay -S --noconfirm --needed
          hyprland
          cpio
          sddm
          nwg-look
          qt5ct
          qt6ct
          hyprpaper
          hyprpicker
          hypridle
          hyprlock
          hyprcursor
          xdg-desktop-portal-hyprland
          wl-clipboard
          rofi-wayland
          waybar
          wtype
          yazi
          imagemagick
          swaync
          thunar
          nautilus
          kdeconnect
          zen-browser-bin
          firefox-pwa-bin
          brightnessctl
          pavucontrol
          pamixer
          orchis-theme
          papirus-icon-theme
          breeze-default-cursor-theme
          cliphist
          flatpak
          grim
          slurp
          feh
          noto-fonts-emoji
          qt5-quickcontrols
          qt5-quickcontrols2
          qt5-graphicaleffects
      changed_when: false

    - name: Download Orchis Theme
      git:
        repo: https://github.com/vinceliuice/Orchis-theme.git
        dest: ~/.local/source/orchis
      register: orchis

    - name: Install Orchis
      shell:
        cmd: ./install.sh --tweaks black
        chdir: ~/.local/source/orchis
      # when: orchis.changed

    - name: Install Hyprspace
      command: hyprpm update && hyprpm add https://github.com/KZDKM/Hyprspace && hyprpm enable Hyprspace
      changed_when: false
      tags:
        - hyprpm
        - hyprspace

    - name: Install Hyprchroma
      command: hyprpm update && hyprpm add https://github.com/alexhulbert/HyprChroma && hyprpm enable Hypr-Chroma
      changed_when: false
      tags:
        - hyprpm
        - hyprchroma

  when: "hyprland.stat.exists"
