---
- name: Check for Hyprland File
  stat:
    path: ~/.hyprland
  register: hyprland

- block:
    - name: Install Hyprland Packages
      command: >
        yay -S --noconfirm --needed
          hyprland
          cpio
          sddm
          nwg-look
          qt5ct
          qt6ct
          hyprpaper
          hyprpicker
          hypridle
          hyprlock
          hyprcursor
          xdg-desktop-portal-hyprland
          xdg-desktop-portal-gtk
          xdg-desktop-portal
          wl-clipboard
          rofi-wayland
          waybar
          wtype
          yazi
          imagemagick
          swaync
          thunar
          nautilus
          kdeconnect
          brightnessctl
          pavucontrol
          pamixer
          orchis-theme
          papirus-icon-theme
          breeze-default-cursor-theme
          cliphist
          flatpak
          grim
          slurp
          feh
          noto-fonts-emoji
          qt5-quickcontrols
          qt5-quickcontrols2
          qt5-graphicaleffects
          xdg-user-dirs
          qimgv
          ungoogled-chromium-bin
          leptonica
          tesseract-data-eng
          wf-recorder
      changed_when: false

    - name: Download Orchis Theme
      git:
        repo: https://github.com/vinceliuice/Orchis-theme.git
        dest: ~/.local/source/orchis
      register: orchis

    - name: Install Orchis
      shell:
        cmd: ./install.sh --tweaks black
        chdir: ~/.local/source/orchis
      when: orchis.changed

    - name: Install Hyprspace
      command: hyprpm update && hyprpm add https://github.com/KZDKM/Hyprspace && hyprpm enable Hyprspace
      changed_when: false
      tags:
        - hyprpm
        - hyprspace

    - name: Install Hyprchroma
      command: hyprpm update && hyprpm add https://github.com/nickconway/HyprChroma && hyprpm enable Hypr-Chroma
      changed_when: false
      tags:
        - hyprpm
        - hyprchroma

    - name: Download Tesseract
      git:
        repo: https://github.com/tesseract-ocr/tesseract
        dest: ~/.local/source/tesseract
      register: tesseract
      tags:
        - tesseract

    - name: Install tesseract
      shell:
        cmd: |
          ./autogen.sh
          ./configure --prefix=$HOME/.local
          make
          make install
          git reset --hard
        chdir: ~/.local/source/tesseract
      when: tesseract.changed
      changed_when: false
      tags:
        - tesseract
  when: "hyprland.stat.exists"
